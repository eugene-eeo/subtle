# This file will contain several tests to exercise some aspects of
# the VM; it just serves as a file for regression tests.

# 93de905 stress test vm_push_frame
let x = Object.clone();
x.setSlot = Object.rawGetSlot("rawSetSlot");
x.setProto(x);
x.getSlot = Fn.new{|k|
    assert k == "toString"
    return Fn.new{
        return k;
    };
};
Object.rawGetSlot("print").
    callWithThis(x);

# stress test table delete
let k = 0
# earlier test fails around ~130
while (k < 500) {
    k = k + 1
    k toString
}
